<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Roleta</title>
</head>

<body>
    <h1>Roleta</h1>
    <p>Gire a roleta para ganhar um multiplicador:</p>
    <canvas id="roleta" width="500" height="500"></canvas>
    <button onclick="girarRoleta()">Girar</button>
    <p id="resultado"></p>

    <script>
        // configuração dos multiplicadores
        const multiplicadores = ["0x", "2x", "7x", "14x", "3x"];

        // gerador de números aleatórios ponderado para mais 0x e 3x
        function gerarMultiplicador() {
            const pesos = [4, 5, 2, 2, 3]; // 0x tem peso 5, 3x tem peso 5, 7x tem peso 3, 14x tem peso 2, e 3x tem peso 5
            const totalPesos = pesos.reduce((acc, peso) => acc + peso, 0);
            let valorAleatorio = Math.floor(Math.random() * totalPesos);
            for (let i = 0; i < pesos.length; i++) {
                valorAleatorio -= pesos[i];
                if (valorAleatorio < 0) {
                    return multiplicadores[i];
                }
            }
        }

        // desenha a roleta com os multiplicadores
        function desenharRoleta() {
            const canvas = document.getElementById("roleta");
            const context = canvas.getContext("2d");

            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 200;
            const slice = (2 * Math.PI) / multiplicadores.length;

            context.beginPath();
            context.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            context.fillStyle = "#EEE";
            context.fill();

            for (let i = 0; i < multiplicadores.length; i++) {
                context.beginPath();
                context.moveTo(centerX, centerY);
                context.arc(
                    centerX,
                    centerY,
                    radius,
                    i * slice,
                    (i + 1) * slice
                );
                context.fillStyle = i % 2 === 0 ? "#CCC" : "#AAA";
                context.fill();

                context.save();
                context.translate(centerX, centerY);
                context.rotate(i * slice);
                context.font = "30px Arial";
                context.fillStyle = "black";
                context.fillText(multiplicadores[i], 140, 10);
                context.restore();
            }
        }

        // gira a roleta e exibe o resultado
        function girarRoleta() {
            const canvas = document.getElementById("roleta");
            const context = canvas.getContext("2d");

            let inicio = 0;
            let velocidade = 0.1;
            let multiplicadorSorteado = "";

            const rotacionarRoleta = () => {
                context.clearRect(0, 0, canvas.width, canvas.height);
                desenharRoleta();

                context.beginPath();
                context.moveTo(canvas.width / 2, canvas.height / 2);
                context.arc(
                    canvas.width / 2,
                    canvas.height / 2,
                    180,
                    inicio,
                    inicio + velocidade,
                    false
                );
                context.closePath();
                context.fillStyle = "#FFA500";
                context.fill();

                inicio += velocidade;

                if (inicio >= Math.PI * 2) {
                    clearInterval(intervalId);
                    multiplicadorSorteado = gerarMultiplicador();
                    document.getElementById("resultado").innerText = `Você ganhou: ${multiplicadorSorteado}`;
                }
            };

            const intervalId = setInterval(rotacionarRoleta, 10);
        }
    </script>
</body>

</html>